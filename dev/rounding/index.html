<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Rounding · TimeZones.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TimeZones.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../conversions/">Converting</a></li><li><a class="tocitem" href="../arithmetic/">Arithmetic</a></li><li class="is-active"><a class="tocitem" href>Rounding</a><ul class="internal"><li><a class="tocitem" href="#Rounding-to-a-TimePeriod"><span>Rounding to a TimePeriod</span></a></li><li><a class="tocitem" href="#Rounding-to-a-DatePeriod"><span>Rounding to a DatePeriod</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="../current/">Current Time</a></li><li><a class="tocitem" href="../faq/">Frequently Asked Questions</a></li><li><a class="tocitem" href="../api-public/">API – Public</a></li><li><a class="tocitem" href="../api-private/">API – Private</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Rounding</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Rounding</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTime/TimeZones.jl/blob/master/docs/src/rounding.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Rounding-a-ZonedDateTime"><a class="docs-heading-anchor" href="#Rounding-a-ZonedDateTime">Rounding a ZonedDateTime</a><a id="Rounding-a-ZonedDateTime-1"></a><a class="docs-heading-anchor-permalink" href="#Rounding-a-ZonedDateTime" title="Permalink"></a></h1><p>Rounding operations (<code>floor</code>, <code>ceil</code>, and <code>round</code>) on <code>ZonedDateTime</code>s are performed in a <a href="https://docs.julialang.org/en/v1/stdlib/Dates/#Rounding-1">similar manner to <code>DateTime</code></a> and should generally behave as expected. When <code>VariableTimeZone</code> transitions are involved, however, unexpected behaviour may be encountered.</p><p>Instead of performing rounding operations on a UTC representation of the <code>ZonedDateTime</code>, which would in some cases be computationally less expensive, rounding is done in the local time zone. This ensures that rounding behaves as expected and is maximally meaningful.</p><p>If rounding were done in UTC, consider how rounding to the nearest day would be resolved for non-UTC time zones: the result would be 00:00 UTC, which wouldn&#39;t be midnight local time. Similarly, when rounding to the nearest hour in <code>Australia/Eucla (UTC+08:45)</code>, the result wouldn&#39;t be on the hour in the local time zone.</p><h2 id="Rounding-to-a-TimePeriod"><a class="docs-heading-anchor" href="#Rounding-to-a-TimePeriod">Rounding to a TimePeriod</a><a id="Rounding-to-a-TimePeriod-1"></a><a class="docs-heading-anchor-permalink" href="#Rounding-to-a-TimePeriod" title="Permalink"></a></h2><p>When the target resolution is a <code>TimePeriod</code> the likelihood of encountering an ambiguous or non-existent time (due to daylight saving time transitions) is increased. To resolve this issue, rounding a <code>ZonedDateTime</code> with a <code>VariableTimeZone</code> to a <code>TimePeriod</code> uses the <code>DateTime</code> value in the appropriate <code>FixedTimeZone</code>, then reconverts it to a <code>ZonedDateTime</code> in the appropriate <code>VariableTimeZone</code> afterward. (See <a href="#Examples">Examples</a> below.)</p><h2 id="Rounding-to-a-DatePeriod"><a class="docs-heading-anchor" href="#Rounding-to-a-DatePeriod">Rounding to a DatePeriod</a><a id="Rounding-to-a-DatePeriod-1"></a><a class="docs-heading-anchor-permalink" href="#Rounding-to-a-DatePeriod" title="Permalink"></a></h2><p>When the target resolution is a <code>DatePeriod</code> rounding is done in the local time zone in a straightforward fashion.</p><p>Rounding is not an entirely &quot;safe&quot; operation for <code>ZonedDateTime</code>s, as in some cases historical transitions for some time zones (<code>Asia/Colombo</code>, for example) occur at midnight. In such cases rounding to a <code>DatePeriod</code> may still result in an <code>AmbiguousTimeError</code> or a <code>NonExistentTimeError</code>s. (But such occurrences should be relatively rare.)</p><p>Regular daylight saving time transitions should be safe.</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>The <code>America/Winnipeg</code> time zone transitioned from Central Standard Time (UTC-6:00) to Central Daylight Time (UTC-5:00) on 2016-03-13, moving directly from 01:59:59 to 03:00:00.</p><pre><code class="language-julia-repl hljs">julia&gt; zdt = ZonedDateTime(2016, 3, 13, 1, 45, tz&quot;America/Winnipeg&quot;)
2016-03-13T01:45:00-06:00

julia&gt; floor(zdt, Dates.Day)
2016-03-13T00:00:00-06:00

julia&gt; ceil(zdt, Dates.Day)
2016-03-14T00:00:00-05:00

julia&gt; round(zdt, Dates.Day)
2016-03-13T00:00:00-06:00

julia&gt; floor(zdt, Dates.Hour)
2016-03-13T01:00:00-06:00

julia&gt; ceil(zdt, Dates.Hour)
2016-03-13T03:00:00-05:00

julia&gt; round(zdt, Dates.Hour)
2016-03-13T03:00:00-05:00</code></pre><p>The <code>Asia/Colombo</code> time zone revised the definition of Lanka Time from UTC+6:30 to UTC+6:00 on 1996-10-26, moving from 00:29:59 back to 00:00:00.</p><pre><code class="language-julia-repl hljs">julia&gt; zdt = ZonedDateTime(1996, 10, 25, 23, 45, tz&quot;Asia/Colombo&quot;)
1996-10-25T23:45:00+06:30

julia&gt; round(zdt, Dates.Hour)
1996-10-26T00:00:00+06:30

julia&gt; round(zdt, Dates.Day)
ERROR: AmbiguousTimeError: Local DateTime 1996-10-26T00:00:00 is ambiguous within Asia/Colombo</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../arithmetic/">« Arithmetic</a><a class="docs-footer-nextpage" href="../current/">Current Time »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 26 May 2024 02:32">Sunday 26 May 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
